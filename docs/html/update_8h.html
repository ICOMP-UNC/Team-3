<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CONVEYOR_BELT: include/update.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CONVEYOR_BELT<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)"
               onblur="searchBox.OnSearchFieldFocus(false)"
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('update_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">update.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>System update functions for speed and distance measurement.
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="button_8h_source.html">button.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hc__sr04_8h_source.html">hc_sr04.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="lcd_8h_source.html">lcd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="motor__driver_8h_source.html">motor_driver.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pid_8h_source.html">pid.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="setpoint_8h_source.html">setpoint.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="speedometer_8h_source.html">speedometer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="utils_8h_source.html">utils.h</a>&quot;</code><br />
<code>#include &lt;libopencm3/cm3/systick.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for update.h:</div>
<div class="dyncontent">
<div class="center"><img src="update_8h__incl.png" border="0" usemap="#ainclude_2update_8h" alt=""/></div>
<map name="ainclude_2update_8h" id="ainclude_2update_8h">
<area shape="rect" title="System update functions for speed and distance measurement." alt="" coords="804,5,920,32"/>
<area shape="rect" href="button_8h.html" title="Button control and debounce handling for STM32." alt="" coords="382,80,450,107"/>
<area shape="poly" title=" " alt="" coords="803,30,654,50,466,82,465,77,654,45,803,24"/>
<area shape="rect" href="hc__sr04_8h.html" title="Ultrasonic sensor HC&#45;SR04 driver for STM32 using libopencm3." alt="" coords="474,80,553,107"/>
<area shape="poly" title=" " alt="" coords="804,34,569,82,568,77,803,29"/>
<area shape="rect" href="lcd_8h.html" title="LCD driver using STM32 microcontroller and I2C expander PCF8574." alt="" coords="837,80,886,107"/>
<area shape="poly" title=" " alt="" coords="864,33,864,64,859,64,859,33"/>
<area shape="rect" href="motor__driver_8h.html" title="Motor control driver using PWM for STM32 with libopencm3." alt="" coords="708,80,812,107"/>
<area shape="poly" title=" " alt="" coords="846,35,792,73,789,68,842,30"/>
<area shape="rect" href="pid_8h.html" title="Proportional&#45;Integral&#45;Derivative (PID) controller header file." alt="" coords="1013,80,1062,107"/>
<area shape="poly" title=" " alt="" coords="893,30,999,73,997,78,891,35"/>
<area shape="rect" href="setpoint_8h.html" title="Potentiometer module for ADC with DMA on STM32." alt="" coords="910,80,989,107"/>
<area shape="poly" title=" " alt="" coords="879,30,925,68,921,72,875,35"/>
<area shape="rect" href="speedometer_8h.html" title="Speedometer module for measuring rotational speed in RPM and rad/s." alt="" coords="577,80,685,107"/>
<area shape="poly" title=" " alt="" coords="822,35,687,77,685,72,821,30"/>
<area shape="rect" href="utils_8h.html" title="Provides a function to convert a floating&#45;point number to a string." alt="" coords="1087,80,1143,107"/>
<area shape="poly" title=" " alt="" coords="908,30,1072,77,1071,82,907,35"/>
<area shape="rect" title=" " alt="" coords="1167,80,1340,107"/>
<area shape="poly" title=" " alt="" coords="921,28,1170,74,1169,79,920,33"/>
<area shape="rect" title=" " alt="" coords="5,155,161,181"/>
<area shape="poly" title=" " alt="" coords="382,105,157,153,155,148,381,99"/>
<area shape="rect" title=" " alt="" coords="185,155,349,181"/>
<area shape="poly" title=" " alt="" coords="391,110,308,150,306,145,389,105"/>
<area shape="rect" title=" " alt="" coords="569,155,736,181"/>
<area shape="poly" title=" " alt="" coords="452,103,597,147,596,152,450,108"/>
<area shape="rect" title=" " alt="" coords="760,155,920,181"/>
<area shape="poly" title=" " alt="" coords="451,101,464,104,611,131,745,151,744,157,611,136,462,109,450,107"/>
<area shape="poly" title=" " alt="" coords="474,107,464,109,312,136,177,157,176,151,312,131,462,104,473,102"/>
<area shape="poly" title=" " alt="" coords="539,105,616,145,613,149,537,110"/>
<area shape="poly" title=" " alt="" coords="554,101,566,104,767,148,766,153,565,109,553,106"/>
<area shape="rect" title=" " alt="" coords="373,155,545,181"/>
<area shape="poly" title=" " alt="" coords="506,109,480,144,476,140,502,106"/>
<area shape="poly" title=" " alt="" coords="837,106,704,152,702,147,836,101"/>
<area shape="poly" title=" " alt="" coords="861,108,851,141,846,139,855,106"/>
<area shape="rect" title=" " alt="" coords="1137,155,1296,181"/>
<area shape="poly" title=" " alt="" coords="888,101,900,104,1015,130,1122,149,1121,155,1014,135,898,109,886,106"/>
<area shape="poly" title=" " alt="" coords="743,109,685,148,682,143,740,105"/>
<area shape="poly" title=" " alt="" coords="776,105,817,142,814,146,772,109"/>
<area shape="poly" title=" " alt="" coords="708,110,527,153,526,148,707,105"/>
<area shape="rect" title=" " alt="" coords="1507,155,1571,181"/>
<area shape="poly" title=" " alt="" coords="1063,101,1076,104,1190,123,1282,130,1374,135,1492,152,1491,157,1374,141,1281,135,1189,128,1074,109,1062,106"/>
<area shape="poly" title=" " alt="" coords="911,107,720,153,719,148,910,102"/>
<area shape="poly" title=" " alt="" coords="932,109,873,148,870,144,929,105"/>
<area shape="rect" title=" " alt="" coords="1320,155,1483,181"/>
<area shape="poly" title=" " alt="" coords="990,102,1002,104,1305,150,1304,156,1001,109,989,107"/>
<area shape="rect" title=" " alt="" coords="945,155,1112,181"/>
<area shape="poly" title=" " alt="" coords="965,105,1005,142,1002,146,962,109"/>
<area shape="poly" title=" " alt="" coords="577,107,565,109,373,135,176,157,176,152,372,129,564,104,576,102"/>
<area shape="poly" title=" " alt="" coords="577,108,346,154,345,149,576,103"/>
<area shape="poly" title=" " alt="" coords="637,106,647,139,642,141,632,108"/>
<area shape="poly" title=" " alt="" coords="668,105,790,147,788,152,667,110"/>
<area shape="poly" title=" " alt="" coords="602,110,504,151,502,146,600,105"/>
<area shape="poly" title=" " alt="" coords="686,102,697,104,944,149,943,154,696,109,685,107"/>
<area shape="rect" title=" " alt="" coords="1596,155,1656,181"/>
<area shape="poly" title=" " alt="" coords="1144,101,1156,104,1272,122,1366,129,1460,135,1580,152,1580,157,1460,140,1366,134,1272,128,1154,109,1143,107"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="update_8h__dep__incl.png" border="0" usemap="#ainclude_2update_8hdep" alt=""/></div>
<map name="ainclude_2update_8hdep" id="ainclude_2update_8hdep">
<area shape="rect" title="System update functions for speed and distance measurement." alt="" coords="5,5,122,32"/>
<area shape="rect" href="update_8c_source.html" title=" " alt="" coords="17,80,110,107"/>
<area shape="poly" title=" " alt="" coords="66,48,66,80,61,80,61,48"/>
</map>
</div>
</div>
<p><a href="update_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a26617fa129b038c7f06c94300f3f7af8" id="r_a26617fa129b038c7f06c94300f3f7af8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a26617fa129b038c7f06c94300f3f7af8">TICKS_FOR_MS</a>&#160;&#160;&#160;72000</td></tr>
<tr class="memdesc:a26617fa129b038c7f06c94300f3f7af8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of ticks for a 1 ms interval at a system clock of 72 MHz.  <br /></td></tr>
<tr class="separator:a26617fa129b038c7f06c94300f3f7af8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e25a296b98cf3e2563949e2c507e1ac" id="r_a6e25a296b98cf3e2563949e2c507e1ac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6e25a296b98cf3e2563949e2c507e1ac">PID_RATE</a>&#160;&#160;&#160;50</td></tr>
<tr class="memdesc:a6e25a296b98cf3e2563949e2c507e1ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sample time interval in milliseconds for PID updates.  <br /></td></tr>
<tr class="separator:a6e25a296b98cf3e2563949e2c507e1ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54232d75b0634a602df4013a0ee3cdb4" id="r_a54232d75b0634a602df4013a0ee3cdb4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a54232d75b0634a602df4013a0ee3cdb4">DISPLAY_RATE</a>&#160;&#160;&#160;500</td></tr>
<tr class="memdesc:a54232d75b0634a602df4013a0ee3cdb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sample time interval in milliseconds for updating the display.  <br /></td></tr>
<tr class="separator:a54232d75b0634a602df4013a0ee3cdb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bd077772d7f9d0cdbadece40c92f6eb" id="r_a5bd077772d7f9d0cdbadece40c92f6eb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5bd077772d7f9d0cdbadece40c92f6eb">MEASUREMENT_RATE</a>&#160;&#160;&#160;120</td></tr>
<tr class="memdesc:a5bd077772d7f9d0cdbadece40c92f6eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sample time interval in milliseconds for object distance measurements.  <br /></td></tr>
<tr class="separator:a5bd077772d7f9d0cdbadece40c92f6eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ead1bfd2f63ec6c0cb324be4f2568a8" id="r_a8ead1bfd2f63ec6c0cb324be4f2568a8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8ead1bfd2f63ec6c0cb324be4f2568a8">N_MEASUREMENT</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:a8ead1bfd2f63ec6c0cb324be4f2568a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of samples taken for each distance measurement average.  <br /></td></tr>
<tr class="separator:a8ead1bfd2f63ec6c0cb324be4f2568a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad53d8aeb9f7ee3d05ae59d27d47ecc53" id="r_ad53d8aeb9f7ee3d05ae59d27d47ecc53"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad53d8aeb9f7ee3d05ae59d27d47ecc53">MEASUREMENT_TRHS</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:ad53d8aeb9f7ee3d05ae59d27d47ecc53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Threshold distance for measurement evaluation in [cm].  <br /></td></tr>
<tr class="separator:ad53d8aeb9f7ee3d05ae59d27d47ecc53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97d4beb6121e285c8f3298f20d23332b" id="r_a97d4beb6121e285c8f3298f20d23332b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a97d4beb6121e285c8f3298f20d23332b">MEASUREMENT_DISPLAY_TIME</a>&#160;&#160;&#160;3000</td></tr>
<tr class="memdesc:a97d4beb6121e285c8f3298f20d23332b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duration in milliseconds to display the measurement result.  <br /></td></tr>
<tr class="separator:a97d4beb6121e285c8f3298f20d23332b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d0de63cb3b2b767719451b355cb94fa" id="r_a0d0de63cb3b2b767719451b355cb94fa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0d0de63cb3b2b767719451b355cb94fa">MAX_RPM</a>&#160;&#160;&#160;6500</td></tr>
<tr class="memdesc:a0d0de63cb3b2b767719451b355cb94fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum revolutions per minute (RPM) for the motor.  <br /></td></tr>
<tr class="separator:a0d0de63cb3b2b767719451b355cb94fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8508aeda574b0df9536234e22cfd3093" id="r_a8508aeda574b0df9536234e22cfd3093"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8508aeda574b0df9536234e22cfd3093">update_init</a> (void)</td></tr>
<tr class="memdesc:a8508aeda574b0df9536234e22cfd3093"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the SysTick timer for system timing.  <br /></td></tr>
<tr class="separator:a8508aeda574b0df9536234e22cfd3093"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a238cd4139b3100b8c2808495144df433" id="r_a238cd4139b3100b8c2808495144df433"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a238cd4139b3100b8c2808495144df433">get_measurement_prom</a> (void)</td></tr>
<tr class="memdesc:a238cd4139b3100b8c2808495144df433"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the average of recorded measurements.  <br /></td></tr>
<tr class="separator:a238cd4139b3100b8c2808495144df433"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd4650ea064c553915d8abc66f203fea" id="r_afd4650ea064c553915d8abc66f203fea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afd4650ea064c553915d8abc66f203fea">display_speed</a> (void)</td></tr>
<tr class="memdesc:afd4650ea064c553915d8abc66f203fea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays the current speed and target setpoint on the LCD.  <br /></td></tr>
<tr class="separator:afd4650ea064c553915d8abc66f203fea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97c262239ed05ce4dbc2e70cdf64d587" id="r_a97c262239ed05ce4dbc2e70cdf64d587"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a97c262239ed05ce4dbc2e70cdf64d587">measure</a> (void)</td></tr>
<tr class="memdesc:a97c262239ed05ce4dbc2e70cdf64d587"><td class="mdescLeft">&#160;</td><td class="mdescRight">Records distance measurements from the ultrasonic sensor.  <br /></td></tr>
<tr class="separator:a97c262239ed05ce4dbc2e70cdf64d587"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a7d6edcda3a07879dd8a10eb587cfa7" id="r_a4a7d6edcda3a07879dd8a10eb587cfa7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4a7d6edcda3a07879dd8a10eb587cfa7">display_measure_info</a> (void)</td></tr>
<tr class="memdesc:a4a7d6edcda3a07879dd8a10eb587cfa7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays measurement information on the LCD.  <br /></td></tr>
<tr class="separator:a4a7d6edcda3a07879dd8a10eb587cfa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57d33dd3d6141c6e02e8669ab489f8c0" id="r_a57d33dd3d6141c6e02e8669ab489f8c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a57d33dd3d6141c6e02e8669ab489f8c0">upt_pid</a> (void)</td></tr>
<tr class="memdesc:a57d33dd3d6141c6e02e8669ab489f8c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the PID controller for motor speed control.  <br /></td></tr>
<tr class="separator:a57d33dd3d6141c6e02e8669ab489f8c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>System update functions for speed and distance measurement. </p>
<p>This file contains functions for initializing the SysTick timer, handling periodic system updates (such as PID updates, LCD display updates, and distance measurements), and calculating the average distance measurement. </p>

<p class="definition">Definition in file <a class="el" href="update_8h_source.html">update.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a54232d75b0634a602df4013a0ee3cdb4" name="a54232d75b0634a602df4013a0ee3cdb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54232d75b0634a602df4013a0ee3cdb4">&#9670;&#160;</a></span>DISPLAY_RATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DISPLAY_RATE&#160;&#160;&#160;500</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sample time interval in milliseconds for updating the display. </p>

<p class="definition">Definition at line <a class="el" href="update_8h_source.html#l00029">29</a> of file <a class="el" href="update_8h_source.html">update.h</a>.</p>

</div>
</div>
<a id="a0d0de63cb3b2b767719451b355cb94fa" name="a0d0de63cb3b2b767719451b355cb94fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d0de63cb3b2b767719451b355cb94fa">&#9670;&#160;</a></span>MAX_RPM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_RPM&#160;&#160;&#160;6500</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum revolutions per minute (RPM) for the motor. </p>
<p>This constant defines the upper limit for the motor speed in RPM. It is used as a reference for setting the motor's speed range and calculating the setpoint. </p>

<p class="definition">Definition at line <a class="el" href="update_8h_source.html#l00049">49</a> of file <a class="el" href="update_8h_source.html">update.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="update_8c_source.html#l00137">upt_pid()</a>.</p>

</div>
</div>
<a id="a97d4beb6121e285c8f3298f20d23332b" name="a97d4beb6121e285c8f3298f20d23332b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97d4beb6121e285c8f3298f20d23332b">&#9670;&#160;</a></span>MEASUREMENT_DISPLAY_TIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEASUREMENT_DISPLAY_TIME&#160;&#160;&#160;3000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Duration in milliseconds to display the measurement result. </p>

<p class="definition">Definition at line <a class="el" href="update_8h_source.html#l00041">41</a> of file <a class="el" href="update_8h_source.html">update.h</a>.</p>

</div>
</div>
<a id="a5bd077772d7f9d0cdbadece40c92f6eb" name="a5bd077772d7f9d0cdbadece40c92f6eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bd077772d7f9d0cdbadece40c92f6eb">&#9670;&#160;</a></span>MEASUREMENT_RATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEASUREMENT_RATE&#160;&#160;&#160;120</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sample time interval in milliseconds for object distance measurements. </p>

<p class="definition">Definition at line <a class="el" href="update_8h_source.html#l00032">32</a> of file <a class="el" href="update_8h_source.html">update.h</a>.</p>

</div>
</div>
<a id="ad53d8aeb9f7ee3d05ae59d27d47ecc53" name="ad53d8aeb9f7ee3d05ae59d27d47ecc53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad53d8aeb9f7ee3d05ae59d27d47ecc53">&#9670;&#160;</a></span>MEASUREMENT_TRHS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEASUREMENT_TRHS&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Threshold distance for measurement evaluation in [cm]. </p>

<p class="definition">Definition at line <a class="el" href="update_8h_source.html#l00038">38</a> of file <a class="el" href="update_8h_source.html">update.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="update_8c_source.html#l00112">measure()</a>.</p>

</div>
</div>
<a id="a8ead1bfd2f63ec6c0cb324be4f2568a8" name="a8ead1bfd2f63ec6c0cb324be4f2568a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ead1bfd2f63ec6c0cb324be4f2568a8">&#9670;&#160;</a></span>N_MEASUREMENT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define N_MEASUREMENT&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of samples taken for each distance measurement average. </p>

<p class="definition">Definition at line <a class="el" href="update_8h_source.html#l00035">35</a> of file <a class="el" href="update_8h_source.html">update.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="update_8c_source.html#l00092">get_measurement_prom()</a>, and <a class="el" href="update_8c_source.html#l00112">measure()</a>.</p>

</div>
</div>
<a id="a6e25a296b98cf3e2563949e2c507e1ac" name="a6e25a296b98cf3e2563949e2c507e1ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e25a296b98cf3e2563949e2c507e1ac">&#9670;&#160;</a></span>PID_RATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PID_RATE&#160;&#160;&#160;50</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sample time interval in milliseconds for PID updates. </p>

<p class="definition">Definition at line <a class="el" href="update_8h_source.html#l00026">26</a> of file <a class="el" href="update_8h_source.html">update.h</a>.</p>

</div>
</div>
<a id="a26617fa129b038c7f06c94300f3f7af8" name="a26617fa129b038c7f06c94300f3f7af8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26617fa129b038c7f06c94300f3f7af8">&#9670;&#160;</a></span>TICKS_FOR_MS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TICKS_FOR_MS&#160;&#160;&#160;72000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of ticks for a 1 ms interval at a system clock of 72 MHz. </p>

<p class="definition">Definition at line <a class="el" href="update_8h_source.html#l00023">23</a> of file <a class="el" href="update_8h_source.html">update.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="update_8c_source.html#l00019">update_init()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4a7d6edcda3a07879dd8a10eb587cfa7" name="a4a7d6edcda3a07879dd8a10eb587cfa7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a7d6edcda3a07879dd8a10eb587cfa7">&#9670;&#160;</a></span>display_measure_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display_measure_info </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Displays measurement information on the LCD. </p>
<p>Depending on whether a full set of measurements has been completed, this function will either display the measurement percentage or the average distance value. Used to provide feedback on object height or measurement completion. </p>
<p>&lt; Display "Height:" label on the LCD.</p>
<p>&lt; Display measurement value.</p>
<p>&lt; Set flag to indicate measurement in display.</p>
<p>&lt; Reset object flag.</p>
<p>&lt; Reset for new measurements.</p>
<p>&lt; Indicate that object measurement is in progress.</p>
<p>&lt; Move cursor to the second row for setpoint display.</p>
<p>&lt; Display measurement percentage.</p>

<p class="definition">Definition at line <a class="el" href="update_8c_source.html#l00145">145</a> of file <a class="el" href="update_8c_source.html">update.c</a>.</p>

<p class="reference">References <a class="el" href="button_8c_source.html#l00071">button_set_object_flag()</a>, <a class="el" href="update_8c_source.html#l00145">display_measure_info()</a>, <a class="el" href="utils_8c_source.html#l00003">float_to_string()</a>, <a class="el" href="update_8c_source.html#l00092">get_measurement_prom()</a>, <a class="el" href="lcd_8c_source.html#l00077">lcd_clear()</a>, <a class="el" href="lcd_8c_source.html#l00069">lcd_print_string()</a>, and <a class="el" href="lcd_8c_source.html#l00083">lcd_set_cursor()</a>.</p>

<p class="reference">Referenced by <a class="el" href="update_8c_source.html#l00145">display_measure_info()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="update_8h_a4a7d6edcda3a07879dd8a10eb587cfa7_cgraph.png" border="0" usemap="#aupdate_8h_a4a7d6edcda3a07879dd8a10eb587cfa7_cgraph" alt=""/></div>
<map name="aupdate_8h_a4a7d6edcda3a07879dd8a10eb587cfa7_cgraph" id="aupdate_8h_a4a7d6edcda3a07879dd8a10eb587cfa7_cgraph">
<area shape="rect" title="Displays measurement information on the LCD." alt="" coords="5,204,153,231"/>
<area shape="poly" title=" " alt="" coords="45,205,38,195,43,186,57,179,79,177,103,180,116,186,114,191,102,185,79,183,58,185,46,189,44,195,49,202"/>
<area shape="rect" href="button_8c.html#a1da15eab4ca519cce1f898928f2b6ecb" title="Sets the state of the object flag." alt="" coords="205,29,358,56"/>
<area shape="poly" title=" " alt="" coords="85,202,128,137,160,99,199,66,207,61,210,65,202,70,164,103,132,140,90,205"/>
<area shape="rect" href="utils_8c.html#a94b9664acaebbb5e9891b305bc09cb93" title="Converts a floating&#45;point number to a string." alt="" coords="230,104,333,131"/>
<area shape="poly" title=" " alt="" coords="98,201,143,171,200,140,214,134,216,139,202,145,146,176,101,206"/>
<area shape="rect" href="update_8c.html#a238cd4139b3100b8c2808495144df433" title="Calculates the average of recorded measurements." alt="" coords="201,179,362,205"/>
<area shape="poly" title=" " alt="" coords="153,205,185,201,185,207,153,211"/>
<area shape="rect" href="lcd_8c.html#ad235a86241458b1e7b8771688bfdaf9a" title="Clears the LCD display." alt="" coords="426,229,500,256"/>
<area shape="poly" title=" " alt="" coords="153,219,412,237,411,242,153,225"/>
<area shape="rect" href="lcd_8c.html#a0725f9cf954c41cdad7a759d7303702c" title="Prints a string on the LCD." alt="" coords="227,304,336,331"/>
<area shape="poly" title=" " alt="" coords="109,229,240,294,238,299,107,234"/>
<area shape="rect" href="lcd_8c.html#a68e592603e66b23b0360f910f3356877" title="Sets the cursor to a specific position on the LCD." alt="" coords="410,379,516,405"/>
<area shape="poly" title=" " alt="" coords="91,230,134,285,166,315,202,340,250,361,300,375,350,383,395,388,394,393,349,389,299,380,248,366,199,345,162,319,130,288,87,233"/>
<area shape="poly" title=" " alt="" coords="250,30,245,21,248,11,261,5,281,3,303,5,315,12,312,16,302,10,281,8,262,10,252,15,250,20,255,28"/>
<area shape="poly" title=" " alt="" coords="250,105,245,95,248,86,261,79,281,77,303,80,315,86,312,91,302,85,281,83,262,85,252,89,250,95,255,102"/>
<area shape="poly" title=" " alt="" coords="250,180,245,170,248,160,261,154,281,152,303,155,315,161,312,166,302,160,281,157,262,159,252,164,250,169,255,177"/>
<area shape="poly" title=" " alt="" coords="436,230,432,221,435,211,446,205,463,203,482,205,492,212,489,216,480,210,463,208,447,210,439,214,437,220,441,228"/>
<area shape="rect" href="lcd_8c.html#ab7cce8122024d7ba47bf10f434956de4" title="Creates a delay for a specified time in milliseconds." alt="" coords="1049,280,1127,307"/>
<area shape="poly" title=" " alt="" coords="501,242,713,256,1002,280,1034,284,1033,289,1001,285,712,261,500,247"/>
<area shape="rect" href="lcd_8c.html#a62b0ce347e78e4030bda4729362011ce" title="Sends a full byte of data or command to the LCD." alt="" coords="564,304,670,331"/>
<area shape="poly" title=" " alt="" coords="494,254,518,266,576,294,573,299,515,270,492,259"/>
<area shape="poly" title=" " alt="" coords="1062,281,1058,271,1061,262,1071,256,1088,253,1106,256,1116,263,1113,267,1104,261,1088,259,1073,261,1065,265,1063,271,1067,278"/>
<area shape="poly" title=" " alt="" coords="670,312,1034,293,1034,299,670,317"/>
<area shape="poly" title=" " alt="" coords="590,305,586,295,589,286,600,280,617,277,636,280,646,287,643,291,634,285,617,283,601,285,593,289,591,295,595,302"/>
<area shape="rect" href="lcd_8c.html#a488c7c357a54839bcd60fc874b617b61" title="Sends a nibble (4 bits) of data or command to the LCD." alt="" coords="718,355,832,381"/>
<area shape="poly" title=" " alt="" coords="662,329,717,347,716,352,660,334"/>
<area shape="poly" title=" " alt="" coords="747,355,743,346,746,336,757,330,775,328,794,331,804,337,801,342,792,336,775,333,759,335,750,340,748,345,752,353"/>
<area shape="rect" href="lcd_8c.html#a3934b2e0af4384b7647cdfc343a59b53" title="Sends a pulse to enable the LCD." alt="" coords="880,355,1001,381"/>
<area shape="poly" title=" " alt="" coords="832,365,865,365,865,371,832,371"/>
<area shape="poly" title=" " alt="" coords="968,352,1045,312,1048,316,970,357"/>
<area shape="poly" title=" " alt="" coords="915,355,910,346,914,336,924,330,941,328,959,331,968,337,965,342,957,336,941,333,926,335,918,340,916,346,920,353"/>
<area shape="poly" title=" " alt="" coords="250,305,245,295,248,286,261,279,281,277,303,280,315,286,312,291,302,285,281,283,262,285,252,289,250,295,255,302"/>
<area shape="rect" href="lcd_8c.html#afa08102a314bc83e4e9825add5dcbc44" title="Prints a single character on the LCD." alt="" coords="412,304,514,331"/>
<area shape="poly" title=" " alt="" coords="336,315,397,315,397,320,336,320"/>
<area shape="poly" title=" " alt="" coords="515,315,549,315,549,320,515,320"/>
<area shape="poly" title=" " alt="" coords="436,305,432,295,435,286,446,280,463,277,482,280,492,287,489,291,480,285,463,283,447,285,439,289,437,295,441,302"/>
<area shape="poly" title=" " alt="" coords="491,376,573,335,575,340,494,381"/>
<area shape="poly" title=" " alt="" coords="436,379,432,370,435,360,446,354,463,352,482,355,492,361,489,366,480,360,463,357,447,359,439,364,437,369,441,377"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="update_8h_a4a7d6edcda3a07879dd8a10eb587cfa7_icgraph.png" border="0" usemap="#aupdate_8h_a4a7d6edcda3a07879dd8a10eb587cfa7_icgraph" alt=""/></div>
<map name="aupdate_8h_a4a7d6edcda3a07879dd8a10eb587cfa7_icgraph" id="aupdate_8h_a4a7d6edcda3a07879dd8a10eb587cfa7_icgraph">
<area shape="rect" title="Displays measurement information on the LCD." alt="" coords="5,29,153,56"/>
<area shape="poly" title=" " alt="" coords="104,16,95,10,79,8,64,10,56,14,54,20,58,28,53,30,49,21,52,11,62,5,79,3,97,5,107,12"/>
</map>
</div>

</div>
</div>
<a id="afd4650ea064c553915d8abc66f203fea" name="afd4650ea064c553915d8abc66f203fea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd4650ea064c553915d8abc66f203fea">&#9670;&#160;</a></span>display_speed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display_speed </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Displays the current speed and target setpoint on the LCD. </p>
<p>Clears the LCD screen and shows the RPM of the motor along with the desired setpoint, updating the display with the latest values. </p>
<p>&lt; Display "RPM:" label on the LCD.</p>
<p>&lt; Display the current speed in RPM.</p>
<p>&lt; Move cursor to the second row for setpoint display.</p>
<p>&lt; Display "Target:" label for setpoint.</p>
<p>&lt; Display the current setpoint in RPM.</p>

<p class="definition">Definition at line <a class="el" href="update_8c_source.html#l00102">102</a> of file <a class="el" href="update_8c_source.html">update.c</a>.</p>

<p class="reference">References <a class="el" href="update_8c_source.html#l00102">display_speed()</a>, <a class="el" href="utils_8c_source.html#l00003">float_to_string()</a>, <a class="el" href="lcd_8c_source.html#l00077">lcd_clear()</a>, <a class="el" href="lcd_8c_source.html#l00069">lcd_print_string()</a>, and <a class="el" href="lcd_8c_source.html#l00083">lcd_set_cursor()</a>.</p>

<p class="reference">Referenced by <a class="el" href="update_8c_source.html#l00102">display_speed()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="update_8h_afd4650ea064c553915d8abc66f203fea_cgraph.png" border="0" usemap="#aupdate_8h_afd4650ea064c553915d8abc66f203fea_cgraph" alt=""/></div>
<map name="aupdate_8h_afd4650ea064c553915d8abc66f203fea_cgraph" id="aupdate_8h_afd4650ea064c553915d8abc66f203fea_cgraph">
<area shape="rect" title="Displays the current speed and target setpoint on the LCD." alt="" coords="5,117,110,144"/>
<area shape="poly" title=" " alt="" coords="31,118,26,109,29,99,40,93,58,91,76,93,86,100,83,104,74,98,57,96,42,98,33,103,31,108,35,116"/>
<area shape="rect" href="utils_8c.html#a94b9664acaebbb5e9891b305bc09cb93" title="Converts a floating&#45;point number to a string." alt="" coords="161,29,264,56"/>
<area shape="poly" title=" " alt="" coords="82,114,173,62,175,66,84,119"/>
<area shape="rect" href="lcd_8c.html#ad235a86241458b1e7b8771688bfdaf9a" title="Clears the LCD display." alt="" coords="332,80,405,107"/>
<area shape="poly" title=" " alt="" coords="110,122,157,116,315,97,316,102,158,121,110,127"/>
<area shape="rect" href="lcd_8c.html#a0725f9cf954c41cdad7a759d7303702c" title="Prints a string on the LCD." alt="" coords="158,155,267,181"/>
<area shape="poly" title=" " alt="" coords="111,141,143,149,142,154,109,146"/>
<area shape="rect" href="lcd_8c.html#a68e592603e66b23b0360f910f3356877" title="Sets the cursor to a specific position on the LCD." alt="" coords="315,229,421,256"/>
<area shape="poly" title=" " alt="" coords="78,142,114,167,159,191,231,215,300,230,299,235,229,220,157,196,112,172,75,147"/>
<area shape="poly" title=" " alt="" coords="185,30,181,21,184,11,195,5,212,3,231,5,241,12,238,16,229,10,212,8,196,10,188,15,186,20,190,28"/>
<area shape="poly" title=" " alt="" coords="341,81,337,71,340,62,351,56,368,53,387,56,397,63,394,67,385,61,368,59,352,61,344,65,342,71,346,78"/>
<area shape="rect" href="lcd_8c.html#ab7cce8122024d7ba47bf10f434956de4" title="Creates a delay for a specified time in milliseconds." alt="" coords="954,131,1032,157"/>
<area shape="poly" title=" " alt="" coords="406,93,618,107,907,131,939,134,938,140,906,136,617,112,405,98"/>
<area shape="rect" href="lcd_8c.html#a62b0ce347e78e4030bda4729362011ce" title="Sends a full byte of data or command to the LCD." alt="" coords="469,155,575,181"/>
<area shape="poly" title=" " alt="" coords="399,105,423,116,481,145,478,150,420,121,397,110"/>
<area shape="poly" title=" " alt="" coords="967,131,963,122,966,112,976,106,993,104,1011,107,1021,113,1018,118,1009,112,993,109,978,111,970,116,968,122,972,129"/>
<area shape="poly" title=" " alt="" coords="575,163,939,144,939,149,575,168"/>
<area shape="poly" title=" " alt="" coords="495,155,491,146,494,136,505,130,522,128,541,131,551,137,548,142,539,136,522,133,506,135,498,140,496,145,500,153"/>
<area shape="rect" href="lcd_8c.html#a488c7c357a54839bcd60fc874b617b61" title="Sends a nibble (4 bits) of data or command to the LCD." alt="" coords="623,205,737,232"/>
<area shape="poly" title=" " alt="" coords="567,179,622,198,621,203,565,185"/>
<area shape="poly" title=" " alt="" coords="652,206,648,197,651,187,662,181,680,179,699,181,709,188,706,192,697,186,680,184,664,186,655,191,653,196,657,204"/>
<area shape="rect" href="lcd_8c.html#a3934b2e0af4384b7647cdfc343a59b53" title="Sends a pulse to enable the LCD." alt="" coords="785,205,906,232"/>
<area shape="poly" title=" " alt="" coords="737,216,770,216,770,221,737,221"/>
<area shape="poly" title=" " alt="" coords="873,202,950,162,953,167,875,207"/>
<area shape="poly" title=" " alt="" coords="820,206,815,197,819,187,829,181,846,179,864,181,873,188,870,192,862,186,846,184,831,186,823,190,821,196,825,204"/>
<area shape="poly" title=" " alt="" coords="185,155,181,146,184,136,195,130,212,128,231,131,241,137,238,142,229,136,212,133,196,135,188,140,186,145,190,153"/>
<area shape="rect" href="lcd_8c.html#afa08102a314bc83e4e9825add5dcbc44" title="Prints a single character on the LCD." alt="" coords="317,155,419,181"/>
<area shape="poly" title=" " alt="" coords="267,165,301,165,301,171,267,171"/>
<area shape="poly" title=" " alt="" coords="420,165,454,165,454,171,420,171"/>
<area shape="poly" title=" " alt="" coords="341,155,337,146,340,136,351,130,368,128,387,131,397,137,394,142,385,136,368,133,352,135,344,140,342,145,346,153"/>
<area shape="poly" title=" " alt="" coords="396,226,478,186,480,191,399,231"/>
<area shape="poly" title=" " alt="" coords="341,230,337,221,340,211,351,205,368,203,387,205,397,212,394,216,385,210,368,208,352,210,344,214,342,220,346,228"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="update_8h_afd4650ea064c553915d8abc66f203fea_icgraph.png" border="0" usemap="#aupdate_8h_afd4650ea064c553915d8abc66f203fea_icgraph" alt=""/></div>
<map name="aupdate_8h_afd4650ea064c553915d8abc66f203fea_icgraph" id="aupdate_8h_afd4650ea064c553915d8abc66f203fea_icgraph">
<area shape="rect" title="Displays the current speed and target setpoint on the LCD." alt="" coords="5,29,110,56"/>
<area shape="poly" title=" " alt="" coords="74,16,68,10,57,8,47,10,42,14,41,20,43,28,38,30,35,20,37,11,45,5,58,3,70,5,78,12"/>
</map>
</div>

</div>
</div>
<a id="a238cd4139b3100b8c2808495144df433" name="a238cd4139b3100b8c2808495144df433"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a238cd4139b3100b8c2808495144df433">&#9670;&#160;</a></span>get_measurement_prom()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float get_measurement_prom </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the average of recorded measurements. </p>
<p>This function iterates through the measurement buffer and calculates the average distance. Used primarily for processing distance measurements from the sensor.</p>
<dl class="section return"><dt>Returns</dt><dd>The average distance measurement. </dd></dl>

<p class="definition">Definition at line <a class="el" href="update_8c_source.html#l00092">92</a> of file <a class="el" href="update_8c_source.html">update.c</a>.</p>

<p class="reference">References <a class="el" href="update_8c_source.html#l00092">get_measurement_prom()</a>, and <a class="el" href="update_8h_source.html#l00035">N_MEASUREMENT</a>.</p>

<p class="reference">Referenced by <a class="el" href="update_8c_source.html#l00145">display_measure_info()</a>, <a class="el" href="update_8c_source.html#l00092">get_measurement_prom()</a>, and <a class="el" href="update_8c_source.html#l00112">measure()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="update_8h_a238cd4139b3100b8c2808495144df433_cgraph.png" border="0" usemap="#aupdate_8h_a238cd4139b3100b8c2808495144df433_cgraph" alt=""/></div>
<map name="aupdate_8h_a238cd4139b3100b8c2808495144df433_cgraph" id="aupdate_8h_a238cd4139b3100b8c2808495144df433_cgraph">
<area shape="rect" title="Calculates the average of recorded measurements." alt="" coords="5,29,167,56"/>
<area shape="poly" title=" " alt="" coords="58,30,53,21,57,11,68,5,86,3,106,5,116,12,113,16,104,10,86,8,69,10,61,15,58,20,63,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="update_8h_a238cd4139b3100b8c2808495144df433_icgraph.png" border="0" usemap="#aupdate_8h_a238cd4139b3100b8c2808495144df433_icgraph" alt=""/></div>
<map name="aupdate_8h_a238cd4139b3100b8c2808495144df433_icgraph" id="aupdate_8h_a238cd4139b3100b8c2808495144df433_icgraph">
<area shape="rect" title="Calculates the average of recorded measurements." alt="" coords="201,67,362,93"/>
<area shape="poly" title=" " alt="" coords="316,54,304,48,281,45,260,47,249,52,246,57,251,65,247,68,241,58,245,48,259,42,281,40,305,43,318,49"/>
<area shape="rect" href="update_8c.html#a4a7d6edcda3a07879dd8a10eb587cfa7" title="Displays measurement information on the LCD." alt="" coords="5,29,153,56"/>
<area shape="poly" title=" " alt="" coords="190,66,152,59,153,54,191,61"/>
<area shape="rect" href="update_8c.html#a97c262239ed05ce4dbc2e70cdf64d587" title="Records distance measurements from the ultrasonic sensor." alt="" coords="43,104,115,131"/>
<area shape="poly" title=" " alt="" coords="191,99,116,113,115,108,190,94"/>
<area shape="poly" title=" " alt="" coords="114,16,102,10,79,8,58,10,46,15,44,20,49,27,45,30,38,21,43,11,57,5,79,3,103,5,116,12"/>
<area shape="poly" title=" " alt="" coords="114,91,102,85,79,83,58,85,46,89,44,95,49,102,45,105,38,95,43,86,57,79,79,77,103,80,116,86"/>
</map>
</div>

</div>
</div>
<a id="a97c262239ed05ce4dbc2e70cdf64d587" name="a97c262239ed05ce4dbc2e70cdf64d587"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97c262239ed05ce4dbc2e70cdf64d587">&#9670;&#160;</a></span>measure()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void measure </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Records distance measurements from the ultrasonic sensor. </p>
<p>This function performs distance measurements using the ultrasonic sensor, stores the results in a buffer, and determines if the measurement meets the pass/fail threshold. </p>
<p>&lt; Store distance in the measurement buffer.</p>
<p>&lt; Calculate average measurement.</p>
<p>&lt; Set pass or fail flag based on threshold.</p>
<p>&lt; Indicate measurement did not pass.</p>
<p>&lt; Display the failed measurement.</p>
<p>&lt; Stop the system and restart when object is not present.</p>

<p class="definition">Definition at line <a class="el" href="update_8c_source.html#l00112">112</a> of file <a class="el" href="update_8c_source.html">update.c</a>.</p>

<p class="reference">References <a class="el" href="utils_8c_source.html#l00003">float_to_string()</a>, <a class="el" href="update_8c_source.html#l00092">get_measurement_prom()</a>, <a class="el" href="hc__sr04_8c_source.html#l00068">hcsr04_get_distance()</a>, <a class="el" href="lcd_8c_source.html#l00077">lcd_clear()</a>, <a class="el" href="lcd_8c_source.html#l00069">lcd_print_string()</a>, <a class="el" href="update_8c_source.html#l00112">measure()</a>, <a class="el" href="update_8h_source.html#l00038">MEASUREMENT_TRHS</a>, and <a class="el" href="update_8h_source.html#l00035">N_MEASUREMENT</a>.</p>

<p class="reference">Referenced by <a class="el" href="update_8c_source.html#l00112">measure()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="update_8h_a97c262239ed05ce4dbc2e70cdf64d587_cgraph.png" border="0" usemap="#aupdate_8h_a97c262239ed05ce4dbc2e70cdf64d587_cgraph" alt=""/></div>
<map name="aupdate_8h_a97c262239ed05ce4dbc2e70cdf64d587_cgraph" id="aupdate_8h_a97c262239ed05ce4dbc2e70cdf64d587_cgraph">
<area shape="rect" title="Records distance measurements from the ultrasonic sensor." alt="" coords="5,179,77,205"/>
<area shape="poly" title=" " alt="" coords="13,179,8,170,11,160,23,154,41,152,61,155,71,161,69,166,59,160,41,157,24,159,15,164,13,169,17,177"/>
<area shape="rect" href="utils_8c.html#a94b9664acaebbb5e9891b305bc09cb93" title="Converts a floating&#45;point number to a string." alt="" coords="154,29,257,56"/>
<area shape="poly" title=" " alt="" coords="45,177,73,123,95,93,123,66,138,57,141,61,126,70,99,96,78,126,50,179"/>
<area shape="rect" href="update_8c.html#a238cd4139b3100b8c2808495144df433" title="Calculates the average of recorded measurements." alt="" coords="125,104,286,131"/>
<area shape="poly" title=" " alt="" coords="61,176,123,140,139,134,141,139,126,145,64,180"/>
<area shape="rect" href="hc__sr04_8c.html#a16a50cc10ebfa3c146e1b506cf3bcbee" title="Retrieves the distance measured by the HC&#45;SR04 sensor in centimeters." alt="" coords="135,179,276,205"/>
<area shape="poly" title=" " alt="" coords="77,189,119,189,119,195,77,195"/>
<area shape="rect" href="lcd_8c.html#ad235a86241458b1e7b8771688bfdaf9a" title="Clears the LCD display." alt="" coords="349,249,422,276"/>
<area shape="poly" title=" " alt="" coords="78,201,125,215,237,237,334,253,333,258,236,243,124,220,77,206"/>
<area shape="rect" href="lcd_8c.html#a0725f9cf954c41cdad7a759d7303702c" title="Prints a string on the LCD." alt="" coords="151,312,260,339"/>
<area shape="poly" title=" " alt="" coords="59,204,126,262,175,300,172,304,123,266,56,208"/>
<area shape="poly" title=" " alt="" coords="177,30,172,21,175,11,187,5,205,3,225,5,236,12,233,16,223,10,205,8,188,10,179,15,177,20,182,28"/>
<area shape="poly" title=" " alt="" coords="177,105,172,95,175,86,187,80,205,77,225,80,236,86,233,91,223,85,205,83,188,85,179,89,177,95,182,102"/>
<area shape="poly" title=" " alt="" coords="177,179,172,170,175,160,187,154,205,152,225,155,236,161,233,166,223,160,205,157,188,159,179,164,177,169,182,177"/>
<area shape="rect" href="hc__sr04_8c.html#a1d98d7c399ecba7202789b91195fef87" title="Sends a 10 s trigger pulse to the HC&#45;SR04 sensor." alt="" coords="334,100,437,127"/>
<area shape="poly" title=" " alt="" coords="237,176,338,131,341,136,239,181"/>
<area shape="rect" href="hc__sr04_8c.html#adc780ff3ce471de65092181bbd65d576" title="Applies saturation to the distance values to avoid out&#45;of&#45;range results." alt="" coords="346,175,425,201"/>
<area shape="poly" title=" " alt="" coords="276,188,331,187,331,192,276,193"/>
<area shape="poly" title=" " alt="" coords="359,101,354,91,358,82,368,76,386,73,404,76,414,83,411,87,402,81,386,79,370,81,362,85,360,91,364,98"/>
<area shape="poly" title=" " alt="" coords="359,175,354,166,358,156,368,150,386,148,404,151,414,157,411,162,402,156,386,153,370,155,362,160,360,165,364,173"/>
<area shape="poly" title=" " alt="" coords="359,250,354,241,358,231,368,225,386,223,404,225,414,232,411,236,402,230,386,228,370,230,362,234,360,240,364,248"/>
<area shape="rect" href="lcd_8c.html#ab7cce8122024d7ba47bf10f434956de4" title="Creates a delay for a specified time in milliseconds." alt="" coords="970,300,1048,327"/>
<area shape="poly" title=" " alt="" coords="423,262,635,276,923,300,955,304,954,309,922,305,634,281,423,267"/>
<area shape="rect" href="lcd_8c.html#a62b0ce347e78e4030bda4729362011ce" title="Sends a full byte of data or command to the LCD." alt="" coords="485,324,591,351"/>
<area shape="poly" title=" " alt="" coords="416,274,497,314,494,319,414,279"/>
<area shape="poly" title=" " alt="" coords="983,301,979,291,982,282,992,276,1009,273,1027,276,1037,283,1034,287,1025,281,1009,279,994,281,986,285,984,291,988,298"/>
<area shape="poly" title=" " alt="" coords="591,332,955,313,955,319,591,337"/>
<area shape="poly" title=" " alt="" coords="511,325,507,315,510,306,521,300,538,297,557,300,566,307,563,311,555,305,538,303,522,305,514,309,512,315,516,322"/>
<area shape="rect" href="lcd_8c.html#a488c7c357a54839bcd60fc874b617b61" title="Sends a nibble (4 bits) of data or command to the LCD." alt="" coords="639,375,753,401"/>
<area shape="poly" title=" " alt="" coords="583,349,638,367,637,372,581,354"/>
<area shape="poly" title=" " alt="" coords="668,375,664,366,667,356,678,350,696,348,715,351,725,357,722,362,713,356,696,353,680,355,671,360,669,365,673,373"/>
<area shape="rect" href="lcd_8c.html#a3934b2e0af4384b7647cdfc343a59b53" title="Sends a pulse to enable the LCD." alt="" coords="801,375,922,401"/>
<area shape="poly" title=" " alt="" coords="753,385,786,385,786,391,753,391"/>
<area shape="poly" title=" " alt="" coords="889,372,966,332,969,336,891,377"/>
<area shape="poly" title=" " alt="" coords="836,375,831,366,835,356,845,350,862,348,880,351,889,357,886,362,878,356,862,353,847,355,839,360,837,366,841,373"/>
<area shape="poly" title=" " alt="" coords="177,313,172,303,175,294,187,288,205,285,225,288,236,294,233,299,223,293,205,291,188,293,179,297,177,303,182,310"/>
<area shape="rect" href="lcd_8c.html#afa08102a314bc83e4e9825add5dcbc44" title="Prints a single character on the LCD." alt="" coords="334,324,437,351"/>
<area shape="poly" title=" " alt="" coords="261,326,319,330,319,336,260,332"/>
<area shape="poly" title=" " alt="" coords="437,335,470,335,470,340,437,340"/>
<area shape="poly" title=" " alt="" coords="359,325,354,315,358,306,368,300,386,297,404,300,414,307,411,311,402,305,386,303,370,305,362,309,360,315,364,322"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="update_8h_a97c262239ed05ce4dbc2e70cdf64d587_icgraph.png" border="0" usemap="#aupdate_8h_a97c262239ed05ce4dbc2e70cdf64d587_icgraph" alt=""/></div>
<map name="aupdate_8h_a97c262239ed05ce4dbc2e70cdf64d587_icgraph" id="aupdate_8h_a97c262239ed05ce4dbc2e70cdf64d587_icgraph">
<area shape="rect" title="Records distance measurements from the ultrasonic sensor." alt="" coords="5,29,77,56"/>
<area shape="poly" title=" " alt="" coords="51,15,48,10,41,8,35,10,31,14,32,29,27,29,26,12,32,5,41,3,51,5,56,12"/>
</map>
</div>

</div>
</div>
<a id="a8508aeda574b0df9536234e22cfd3093" name="a8508aeda574b0df9536234e22cfd3093"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8508aeda574b0df9536234e22cfd3093">&#9670;&#160;</a></span>update_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_init </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the SysTick timer for system timing. </p>
<p>Sets the reload value for generating an interrupt every millisecond, selects the AHB clock as the source, and enables both the counter and the interrupt. </p>
<p>&lt; Set reload value for 1 ms.</p>
<p>&lt; Use the AHB clock as the SysTick source.</p>
<p>&lt; Enable the SysTick counter.</p>
<p>&lt; Enable SysTick interrupt.</p>

<p class="definition">Definition at line <a class="el" href="update_8c_source.html#l00019">19</a> of file <a class="el" href="update_8c_source.html">update.c</a>.</p>

<p class="reference">References <a class="el" href="update_8h_source.html#l00023">TICKS_FOR_MS</a>, and <a class="el" href="update_8c_source.html#l00019">update_init()</a>.</p>

<p class="reference">Referenced by <a class="el" href="update_8c_source.html#l00019">update_init()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="update_8h_a8508aeda574b0df9536234e22cfd3093_cgraph.png" border="0" usemap="#aupdate_8h_a8508aeda574b0df9536234e22cfd3093_cgraph" alt=""/></div>
<map name="aupdate_8h_a8508aeda574b0df9536234e22cfd3093_cgraph" id="aupdate_8h_a8508aeda574b0df9536234e22cfd3093_cgraph">
<area shape="rect" title="Initializes the SysTick timer for system timing." alt="" coords="5,29,90,56"/>
<area shape="poly" title=" " alt="" coords="31,29,31,12,37,5,48,3,58,5,64,12,60,15,56,10,47,8,40,10,36,14,37,29"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="update_8h_a8508aeda574b0df9536234e22cfd3093_icgraph.png" border="0" usemap="#aupdate_8h_a8508aeda574b0df9536234e22cfd3093_icgraph" alt=""/></div>
<map name="aupdate_8h_a8508aeda574b0df9536234e22cfd3093_icgraph" id="aupdate_8h_a8508aeda574b0df9536234e22cfd3093_icgraph">
<area shape="rect" title="Initializes the SysTick timer for system timing." alt="" coords="5,29,90,56"/>
<area shape="poly" title=" " alt="" coords="60,15,56,10,47,8,40,10,36,14,37,29,31,29,31,12,37,5,48,3,58,5,64,12"/>
</map>
</div>

</div>
</div>
<a id="a57d33dd3d6141c6e02e8669ab489f8c0" name="a57d33dd3d6141c6e02e8669ab489f8c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57d33dd3d6141c6e02e8669ab489f8c0">&#9670;&#160;</a></span>upt_pid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void upt_pid </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the PID controller for motor speed control. </p>
<p>Retrieves the current potentiometer value for the setpoint, obtains the current RPM from the speedometer, and adjusts motor power output based on the PID controller's calculations. </p>
<p>&lt; Update setpoint based on potentiometer input.</p>
<p>&lt; Retrieve the current speed in RPM.</p>
<p>&lt; Update motor power based on PID output and current speed.</p>

<p class="definition">Definition at line <a class="el" href="update_8c_source.html#l00137">137</a> of file <a class="el" href="update_8c_source.html">update.c</a>.</p>

<p class="reference">References <a class="el" href="update_8h_source.html#l00049">MAX_RPM</a>, <a class="el" href="motor__driver_8c_source.html#l00032">motor_set_power()</a>, <a class="el" href="pid_8c_source.html#l00053">pid_setpoint()</a>, <a class="el" href="pid_8c_source.html#l00012">pid_update()</a>, <a class="el" href="setpoint_8c_source.html#l00056">pot_get_value()</a>, <a class="el" href="speedometer_8c_source.html#l00056">speedometer_getRPM()</a>, and <a class="el" href="update_8c_source.html#l00137">upt_pid()</a>.</p>

<p class="reference">Referenced by <a class="el" href="update_8c_source.html#l00137">upt_pid()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="update_8h_a57d33dd3d6141c6e02e8669ab489f8c0_cgraph.png" border="0" usemap="#aupdate_8h_a57d33dd3d6141c6e02e8669ab489f8c0_cgraph" alt=""/></div>
<map name="aupdate_8h_a57d33dd3d6141c6e02e8669ab489f8c0_cgraph" id="aupdate_8h_a57d33dd3d6141c6e02e8669ab489f8c0_cgraph">
<area shape="rect" title="Updates the PID controller for motor speed control." alt="" coords="5,179,69,205"/>
<area shape="poly" title=" " alt="" coords="10,179,5,170,9,160,19,154,37,152,56,155,66,161,63,166,54,160,37,157,21,159,13,164,11,169,15,177"/>
<area shape="rect" href="motor__driver_8c.html#a13fda465d7a5854bde53087bc1489ea0" title="Sets the motor power by adjusting the PWM duty cycle." alt="" coords="132,29,253,56"/>
<area shape="poly" title=" " alt="" coords="41,177,67,124,88,93,115,66,121,61,124,66,118,70,92,96,72,126,46,179"/>
<area shape="rect" href="pid_8c.html#a751cced089b6c8f539c4852e60cd0fcc" title="Sets the desired setpoint for the PID controller." alt="" coords="147,104,238,131"/>
<area shape="poly" title=" " alt="" coords="56,176,115,140,131,133,133,138,118,145,59,180"/>
<area shape="rect" href="pid_8c.html#a58f9dfae835c7b8f2c6340c53d2d2e52" title="Updates the PID controller and calculates the control output." alt="" coords="150,179,234,205"/>
<area shape="poly" title=" " alt="" coords="69,189,135,189,135,195,69,195"/>
<area shape="rect" href="setpoint_8c.html#a8a5d4b137f31855b38eb58dc5c2dd3a2" title="Retrieves the latest potentiometer value." alt="" coords="141,253,244,280"/>
<area shape="poly" title=" " alt="" coords="68,203,150,244,148,249,66,208"/>
<area shape="rect" href="speedometer_8c.html#aeefd790f68f5e4c91cfa4ef56e2e898e" title="Gets the current speed in revolutions per minute (RPM)." alt="" coords="117,328,268,355"/>
<area shape="poly" title=" " alt="" coords="49,204,78,245,118,290,155,317,151,322,115,294,74,248,45,207"/>
<area shape="poly" title=" " alt="" coords="165,30,161,21,164,11,175,5,192,3,211,5,221,12,218,16,209,10,192,8,176,10,168,15,166,20,170,28"/>
<area shape="poly" title=" " alt="" coords="165,105,161,95,164,86,175,80,192,77,211,80,221,87,218,91,209,85,192,83,176,85,168,89,166,95,170,102"/>
<area shape="poly" title=" " alt="" coords="165,179,161,170,164,160,175,154,192,152,211,155,221,161,218,166,209,160,192,157,176,159,168,164,166,169,170,177"/>
<area shape="poly" title=" " alt="" coords="165,254,161,245,164,235,175,229,192,227,211,229,221,236,218,240,209,234,192,232,176,234,168,239,166,244,170,252"/>
<area shape="poly" title=" " alt="" coords="165,329,161,319,164,310,175,304,192,301,211,304,221,311,218,315,209,309,192,307,176,309,168,313,166,319,170,326"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="update_8h_a57d33dd3d6141c6e02e8669ab489f8c0_icgraph.png" border="0" usemap="#aupdate_8h_a57d33dd3d6141c6e02e8669ab489f8c0_icgraph" alt=""/></div>
<map name="aupdate_8h_a57d33dd3d6141c6e02e8669ab489f8c0_icgraph" id="aupdate_8h_a57d33dd3d6141c6e02e8669ab489f8c0_icgraph">
<area shape="rect" title="Updates the PID controller for motor speed control." alt="" coords="5,29,69,56"/>
<area shape="poly" title=" " alt="" coords="46,15,43,10,37,8,32,10,29,14,30,29,24,29,24,12,29,5,37,3,46,6,50,12"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="update_8h.html">update.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
