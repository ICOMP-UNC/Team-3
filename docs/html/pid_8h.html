<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CONVEYOR_BELT: include/pid.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CONVEYOR_BELT<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)"
               onblur="searchBox.OnSearchFieldFocus(false)"
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('pid_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">pid.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Proportional-Integral-Derivative (PID) controller header file.
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for pid.h:</div>
<div class="dyncontent">
<div class="center"><img src="pid_8h__incl.png" border="0" usemap="#ainclude_2pid_8h" alt=""/></div>
<map name="ainclude_2pid_8h" id="ainclude_2pid_8h">
<area shape="rect" title="Proportional&#45;Integral&#45;Derivative (PID) controller header file." alt="" coords="5,5,100,32"/>
<area shape="rect" title=" " alt="" coords="20,80,85,107"/>
<area shape="poly" title=" " alt="" coords="55,33,55,64,50,64,50,33"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="pid_8h__dep__incl.png" border="0" usemap="#ainclude_2pid_8hdep" alt=""/></div>
<map name="ainclude_2pid_8hdep" id="ainclude_2pid_8hdep">
<area shape="rect" title="Proportional&#45;Integral&#45;Derivative (PID) controller header file." alt="" coords="75,5,169,32"/>
<area shape="rect" href="update_8h.html" title="System update functions for speed and distance measurement." alt="" coords="5,80,122,107"/>
<area shape="poly" title=" " alt="" coords="104,46,76,81,72,78,100,43"/>
<area shape="rect" href="pid_8c_source.html" title=" " alt="" coords="145,80,216,107"/>
<area shape="poly" title=" " alt="" coords="144,43,173,78,169,81,140,46"/>
<area shape="rect" href="update_8c_source.html" title=" " alt="" coords="17,155,110,181"/>
<area shape="poly" title=" " alt="" coords="66,122,66,154,61,154,61,122"/>
</map>
</div>
</div>
<p><a href="pid_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPID__Controller.html">PID_Controller</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure that holds the PID controller parameters and setpoint.  <a href="structPID__Controller.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:acd7066f5bf652bcd046aec3ad8bac6ac" id="r_acd7066f5bf652bcd046aec3ad8bac6ac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acd7066f5bf652bcd046aec3ad8bac6ac">MAX_PID_OUTPUT</a>&#160;&#160;&#160;100</td></tr>
<tr class="memdesc:acd7066f5bf652bcd046aec3ad8bac6ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum output value for the PID controller.  <br /></td></tr>
<tr class="separator:acd7066f5bf652bcd046aec3ad8bac6ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fbb0a998f0cd0e5376896031ab09ed3" id="r_a2fbb0a998f0cd0e5376896031ab09ed3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2fbb0a998f0cd0e5376896031ab09ed3">MIN_PID_OUTPUT</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:a2fbb0a998f0cd0e5376896031ab09ed3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum output value for the PID controller.  <br /></td></tr>
<tr class="separator:a2fbb0a998f0cd0e5376896031ab09ed3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad802f9d24b0bd2e20978730521aa95f7" id="r_ad802f9d24b0bd2e20978730521aa95f7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad802f9d24b0bd2e20978730521aa95f7">MAX_INTEGRAL_ERROR</a>&#160;&#160;&#160;30000.0</td></tr>
<tr class="memdesc:ad802f9d24b0bd2e20978730521aa95f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum allowable accumulated error for the integral term to prevent windup.  <br /></td></tr>
<tr class="separator:ad802f9d24b0bd2e20978730521aa95f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac0a8270959799980edaf42872118f69c" id="r_ac0a8270959799980edaf42872118f69c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac0a8270959799980edaf42872118f69c">pid_init</a> (<a class="el" href="structPID__Controller.html">PID_Controller</a> *pid)</td></tr>
<tr class="memdesc:ac0a8270959799980edaf42872118f69c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the PID controller with specified gains and desired reference.  <br /></td></tr>
<tr class="separator:ac0a8270959799980edaf42872118f69c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58f9dfae835c7b8f2c6340c53d2d2e52" id="r_a58f9dfae835c7b8f2c6340c53d2d2e52"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a58f9dfae835c7b8f2c6340c53d2d2e52">pid_update</a> (float measured_value)</td></tr>
<tr class="memdesc:a58f9dfae835c7b8f2c6340c53d2d2e52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the PID controller and calculates the control output.  <br /></td></tr>
<tr class="separator:a58f9dfae835c7b8f2c6340c53d2d2e52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a751cced089b6c8f539c4852e60cd0fcc" id="r_a751cced089b6c8f539c4852e60cd0fcc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a751cced089b6c8f539c4852e60cd0fcc">pid_setpoint</a> (float setpoint)</td></tr>
<tr class="memdesc:a751cced089b6c8f539c4852e60cd0fcc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the desired setpoint for the PID controller.  <br /></td></tr>
<tr class="separator:a751cced089b6c8f539c4852e60cd0fcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Proportional-Integral-Derivative (PID) controller header file. </p>
<p>This file defines the structure and functions necessary to initialize and control a PID controller. The PID controller computes an output based on the proportional, integral, and derivative terms derived from the error between a desired setpoint and a measured process variable. </p>

<p class="definition">Definition in file <a class="el" href="pid_8h_source.html">pid.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad802f9d24b0bd2e20978730521aa95f7" name="ad802f9d24b0bd2e20978730521aa95f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad802f9d24b0bd2e20978730521aa95f7">&#9670;&#160;</a></span>MAX_INTEGRAL_ERROR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_INTEGRAL_ERROR&#160;&#160;&#160;30000.0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum allowable accumulated error for the integral term to prevent windup. </p>
<p>Caps the accumulated error in the integral term to prevent excessive overshoot, a condition known as integral windup. </p>

<p class="definition">Definition at line <a class="el" href="pid_8h_source.html#l00035">35</a> of file <a class="el" href="pid_8h_source.html">pid.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="pid_8c_source.html#l00012">pid_update()</a>.</p>

</div>
</div>
<a id="acd7066f5bf652bcd046aec3ad8bac6ac" name="acd7066f5bf652bcd046aec3ad8bac6ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd7066f5bf652bcd046aec3ad8bac6ac">&#9670;&#160;</a></span>MAX_PID_OUTPUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_PID_OUTPUT&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum output value for the PID controller. </p>
<p>Sets the upper bound for the controller’s output, typically representing 100% power or the maximum allowable effect of the controller on the system. </p>

<p class="definition">Definition at line <a class="el" href="pid_8h_source.html#l00019">19</a> of file <a class="el" href="pid_8h_source.html">pid.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="pid_8c_source.html#l00012">pid_update()</a>.</p>

</div>
</div>
<a id="a2fbb0a998f0cd0e5376896031ab09ed3" name="a2fbb0a998f0cd0e5376896031ab09ed3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fbb0a998f0cd0e5376896031ab09ed3">&#9670;&#160;</a></span>MIN_PID_OUTPUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_PID_OUTPUT&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Minimum output value for the PID controller. </p>
<p>Defines the lower bound for the controller's output, usually representing 0% power or the minimum effect of the controller. </p>

<p class="definition">Definition at line <a class="el" href="pid_8h_source.html#l00027">27</a> of file <a class="el" href="pid_8h_source.html">pid.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="pid_8c_source.html#l00012">pid_update()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ac0a8270959799980edaf42872118f69c" name="ac0a8270959799980edaf42872118f69c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0a8270959799980edaf42872118f69c">&#9670;&#160;</a></span>pid_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pid_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPID__Controller.html">PID_Controller</a> *</td>          <td class="paramname"><span class="paramname"><em>pid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the PID controller with specified gains and desired reference. </p>
<p>This function sets up the PID controller structure with given proportional, integral, and derivative gains, as well as the initial setpoint for the control loop.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>Pointer to the PID controller structure. </td></tr>
  </table>
  </dd>
</dl>
<p>Copy the control parameters into the local PID controller</p>

<p class="definition">Definition at line <a class="el" href="pid_8c_source.html#l00007">7</a> of file <a class="el" href="pid_8c_source.html">pid.c</a>.</p>

<p class="reference">References <a class="el" href="pid_8c_source.html#l00007">pid_init()</a>.</p>

<p class="reference">Referenced by <a class="el" href="pid_8c_source.html#l00007">pid_init()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pid_8h_ac0a8270959799980edaf42872118f69c_cgraph.png" border="0" usemap="#apid_8h_ac0a8270959799980edaf42872118f69c_cgraph" alt=""/></div>
<map name="apid_8h_ac0a8270959799980edaf42872118f69c_cgraph" id="apid_8h_ac0a8270959799980edaf42872118f69c_cgraph">
<area shape="rect" title="Initializes the PID controller with specified gains and desired reference." alt="" coords="5,29,68,56"/>
<area shape="poly" title=" " alt="" coords="24,29,23,12,28,5,37,3,45,6,50,12,45,15,42,10,36,8,31,10,28,14,29,29"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pid_8h_ac0a8270959799980edaf42872118f69c_icgraph.png" border="0" usemap="#apid_8h_ac0a8270959799980edaf42872118f69c_icgraph" alt=""/></div>
<map name="apid_8h_ac0a8270959799980edaf42872118f69c_icgraph" id="apid_8h_ac0a8270959799980edaf42872118f69c_icgraph">
<area shape="rect" title="Initializes the PID controller with specified gains and desired reference." alt="" coords="5,29,68,56"/>
<area shape="poly" title=" " alt="" coords="45,15,42,10,36,8,31,10,28,14,29,29,24,29,23,12,28,5,37,3,45,6,50,12"/>
</map>
</div>

</div>
</div>
<a id="a751cced089b6c8f539c4852e60cd0fcc" name="a751cced089b6c8f539c4852e60cd0fcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a751cced089b6c8f539c4852e60cd0fcc">&#9670;&#160;</a></span>pid_setpoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pid_setpoint </td>
          <td>(</td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>setpoint</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the desired setpoint for the PID controller. </p>
<p>This function allows updating the setpoint of the PID controller, defining the target value that the system should aim to reach.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">setpoint</td><td>The desired setpoint for the control loop. </td></tr>
  </table>
  </dd>
</dl>
<p>Update the setpoint in the PID controller</p>

<p class="definition">Definition at line <a class="el" href="pid_8c_source.html#l00053">53</a> of file <a class="el" href="pid_8c_source.html">pid.c</a>.</p>

<p class="reference">References <a class="el" href="pid_8c_source.html#l00053">pid_setpoint()</a>, and <a class="el" href="pid_8h_source.html#l00049">PID_Controller::setpoint</a>.</p>

<p class="reference">Referenced by <a class="el" href="pid_8c_source.html#l00053">pid_setpoint()</a>, and <a class="el" href="update_8c_source.html#l00137">upt_pid()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pid_8h_a751cced089b6c8f539c4852e60cd0fcc_cgraph.png" border="0" usemap="#apid_8h_a751cced089b6c8f539c4852e60cd0fcc_cgraph" alt=""/></div>
<map name="apid_8h_a751cced089b6c8f539c4852e60cd0fcc_cgraph" id="apid_8h_a751cced089b6c8f539c4852e60cd0fcc_cgraph">
<area shape="rect" title="Sets the desired setpoint for the PID controller." alt="" coords="5,29,97,56"/>
<area shape="poly" title=" " alt="" coords="34,30,31,20,33,11,40,5,51,3,63,5,69,12,65,15,60,10,51,8,42,10,38,14,37,20,39,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pid_8h_a751cced089b6c8f539c4852e60cd0fcc_icgraph.png" border="0" usemap="#apid_8h_a751cced089b6c8f539c4852e60cd0fcc_icgraph" alt=""/></div>
<map name="apid_8h_a751cced089b6c8f539c4852e60cd0fcc_icgraph" id="apid_8h_a751cced089b6c8f539c4852e60cd0fcc_icgraph">
<area shape="rect" title="Sets the desired setpoint for the PID controller." alt="" coords="117,29,208,56"/>
<area shape="poly" title=" " alt="" coords="183,16,176,10,162,8,150,10,143,14,142,20,145,28,140,30,136,21,139,11,148,5,162,3,178,5,186,12"/>
<area shape="rect" href="update_8c.html#a57d33dd3d6141c6e02e8669ab489f8c0" title="Updates the PID controller for motor speed control." alt="" coords="5,29,69,56"/>
<area shape="poly" title=" " alt="" coords="101,45,69,45,69,40,101,40"/>
<area shape="poly" title=" " alt="" coords="57,16,50,10,37,8,24,10,18,14,16,20,20,28,15,30,11,21,14,11,23,5,37,3,53,5,61,12"/>
</map>
</div>

</div>
</div>
<a id="a58f9dfae835c7b8f2c6340c53d2d2e52" name="a58f9dfae835c7b8f2c6340c53d2d2e52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58f9dfae835c7b8f2c6340c53d2d2e52">&#9670;&#160;</a></span>pid_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t pid_update </td>
          <td>(</td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>measured_value</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the PID controller and calculates the control output. </p>
<p>This function computes the PID control output based on the current error between the setpoint and the measured value. It updates the integral and derivative terms, calculates the control action, and constrains it to the predefined limits.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">measured_value</td><td>The current measured value of the process variable. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The control output, constrained between MIN_PID_OUTPUT and MAX_PID_OUTPUT. </dd></dl>
<p>Calculate the current error as the difference between setpoint and measured value</p>
<p>Update the integral term by adding the current error</p>
<p>Cap the integral to prevent windup</p>
<p>Limit the integral to a maximum threshold</p>
<p>Limit the integral to a minimum threshold</p>
<p>Calculate the derivative term as the difference from the previous error</p>
<p>Calculate the PID output based on the error, integral, and derivative terms</p>
<p>Constrain the output to ensure it stays within allowed limits</p>
<p>Cap output at the maximum limit</p>
<p>Cap output at the minimum limit</p>
<p>Save the current error to use in the next cycle for the derivative calculation</p>
<p>Return the constrained output as an 8-bit integer</p>

<p class="definition">Definition at line <a class="el" href="pid_8c_source.html#l00012">12</a> of file <a class="el" href="pid_8c_source.html">pid.c</a>.</p>

<p class="reference">References <a class="el" href="pid_8h_source.html#l00048">PID_Controller::kd</a>, <a class="el" href="pid_8h_source.html#l00047">PID_Controller::ki</a>, <a class="el" href="pid_8h_source.html#l00046">PID_Controller::kp</a>, <a class="el" href="pid_8h_source.html#l00035">MAX_INTEGRAL_ERROR</a>, <a class="el" href="pid_8h_source.html#l00019">MAX_PID_OUTPUT</a>, <a class="el" href="pid_8h_source.html#l00027">MIN_PID_OUTPUT</a>, <a class="el" href="pid_8c_source.html#l00012">pid_update()</a>, and <a class="el" href="pid_8h_source.html#l00049">PID_Controller::setpoint</a>.</p>

<p class="reference">Referenced by <a class="el" href="pid_8c_source.html#l00012">pid_update()</a>, and <a class="el" href="update_8c_source.html#l00137">upt_pid()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pid_8h_a58f9dfae835c7b8f2c6340c53d2d2e52_cgraph.png" border="0" usemap="#apid_8h_a58f9dfae835c7b8f2c6340c53d2d2e52_cgraph" alt=""/></div>
<map name="apid_8h_a58f9dfae835c7b8f2c6340c53d2d2e52_cgraph" id="apid_8h_a58f9dfae835c7b8f2c6340c53d2d2e52_cgraph">
<area shape="rect" title="Updates the PID controller and calculates the control output." alt="" coords="5,29,90,56"/>
<area shape="poly" title=" " alt="" coords="31,29,31,12,37,5,48,3,58,5,64,12,60,15,56,10,47,8,40,10,36,14,37,29"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pid_8h_a58f9dfae835c7b8f2c6340c53d2d2e52_icgraph.png" border="0" usemap="#apid_8h_a58f9dfae835c7b8f2c6340c53d2d2e52_icgraph" alt=""/></div>
<map name="apid_8h_a58f9dfae835c7b8f2c6340c53d2d2e52_icgraph" id="apid_8h_a58f9dfae835c7b8f2c6340c53d2d2e52_icgraph">
<area shape="rect" title="Updates the PID controller and calculates the control output." alt="" coords="117,29,201,56"/>
<area shape="poly" title=" " alt="" coords="179,16,172,10,159,8,147,10,140,14,139,20,142,28,137,30,133,20,136,11,145,5,159,3,174,5,182,12"/>
<area shape="rect" href="update_8c.html#a57d33dd3d6141c6e02e8669ab489f8c0" title="Updates the PID controller for motor speed control." alt="" coords="5,29,69,56"/>
<area shape="poly" title=" " alt="" coords="101,45,69,45,69,40,101,40"/>
<area shape="poly" title=" " alt="" coords="57,16,50,10,37,8,25,10,18,14,17,20,20,28,15,30,12,20,14,11,23,5,37,3,52,5,60,12"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="pid_8h.html">pid.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
